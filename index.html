<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NEXORA</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&amp;family=JetBrains+Mono:wght@400;500;600&amp;display=swap" rel="stylesheet">
  <script>
tailwind.config = {
  theme: {
    extend: {
      fontFamily: {
        outfit: ['Outfit', 'sans-serif'],
        mono: ['JetBrains Mono', 'monospace']
      }
    }
  }
}
</script>
  <style>
html, body { height: 100%; margin: 0; padding: 0; }
* { box-sizing: border-box; }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: #0a0a14; }
::-webkit-scrollbar-thumb { background: #2a2a4a; border-radius: 3px; }

@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  33% { transform: translateY(-8px) rotate(1deg); }
  66% { transform: translateY(4px) rotate(-1deg); }
}
@keyframes pulse-glow {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}
@keyframes particle-drift {
  0% { transform: translate(0, 0) scale(1); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translate(var(--dx), var(--dy)) scale(0.3); opacity: 0; }
}
@keyframes line-draw {
  0% { stroke-dashoffset: 1000; }
  100% { stroke-dashoffset: 0; }
}
@keyframes fade-in-up {
  0% { opacity: 0; transform: translateY(24px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@keyframes count-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.animate-fade-in-up {
  animation: fade-in-up 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  opacity: 0;
}
.delay-1 { animation-delay: 0.1s; }
.delay-2 { animation-delay: 0.2s; }
.delay-3 { animation-delay: 0.3s; }
.delay-4 { animation-delay: 0.4s; }
.delay-5 { animation-delay: 0.5s; }
.delay-6 { animation-delay: 0.6s; }

.glass-card {
  background: linear-gradient(135deg, rgba(15, 15, 35, 0.8) 0%, rgba(10, 10, 25, 0.6) 100%);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(99, 102, 241, 0.12);
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}
.glass-card:hover {
  border-color: rgba(99, 102, 241, 0.3);
  box-shadow: 0 0 30px rgba(99, 102, 241, 0.08), inset 0 1px 0 rgba(255,255,255,0.05);
  transform: translateY(-2px);
}

.btn-primary {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%);
  background-size: 200% 200%;
  color: white;
  font-weight: 600;
  border: none;
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}
.btn-primary::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
  opacity: 0;
  transition: opacity 0.3s;
}
.btn-primary:hover {
  background-position: 100% 100%;
  box-shadow: 0 0 24px rgba(99, 102, 241, 0.4), 0 0 48px rgba(139, 92, 246, 0.15);
  transform: translateY(-1px);
}
.btn-primary:hover::before { opacity: 1; }
.btn-primary:active { transform: translateY(0); }

.btn-secondary {
  background: transparent;
  color: #c4b5fd;
  font-weight: 600;
  border: 1px solid rgba(139, 92, 246, 0.35);
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}
.btn-secondary:hover {
  background: rgba(139, 92, 246, 0.1);
  border-color: rgba(139, 92, 246, 0.6);
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.15);
  color: #e0d5ff;
}
.btn-secondary:active { transform: translateY(0); }

.input-field {
  background: rgba(10, 10, 30, 0.6);
  border: 1px solid rgba(99, 102, 241, 0.15);
  color: #e2e8f0;
  transition: all 0.3s;
}
.input-field:focus {
  outline: none;
  border-color: rgba(99, 102, 241, 0.5);
  box-shadow: 0 0 16px rgba(99, 102, 241, 0.15);
}
.input-field::placeholder { color: rgba(148, 163, 184, 0.4); }

.badge-open { background: rgba(52, 211, 153, 0.15); color: #34d399; border: 1px solid rgba(52, 211, 153, 0.25); }
.badge-closed { background: rgba(251, 191, 36, 0.15); color: #fbbf24; border: 1px solid rgba(251, 191, 36, 0.25); }
.badge-resolved { background: rgba(99, 102, 241, 0.15); color: #818cf8; border: 1px solid rgba(99, 102, 241, 0.25); }

.nav-link {
  color: rgba(203, 213, 225, 0.6);
  transition: all 0.3s;
  position: relative;
}
.nav-link:hover, .nav-link.active {
  color: #e2e8f0;
}
.nav-link.active::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, #6366f1, #8b5cf6);
  border-radius: 1px;
}

.pool-bar-yes {
  background: linear-gradient(90deg, #34d399, #10b981);
  box-shadow: 0 0 12px rgba(52, 211, 153, 0.3);
}
.pool-bar-no {
  background: linear-gradient(90deg, #f87171, #ef4444);
  box-shadow: 0 0 12px rgba(248, 113, 113, 0.3);
}

.encrypted-badge {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
  border: 1px solid rgba(99, 102, 241, 0.2);
}

.toggle-btn {
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}
.toggle-btn.active-yes {
  background: rgba(52, 211, 153, 0.2);
  border-color: #34d399;
  color: #34d399;
  box-shadow: 0 0 16px rgba(52, 211, 153, 0.2);
}
.toggle-btn.active-no {
  background: rgba(248, 113, 113, 0.2);
  border-color: #f87171;
  color: #f87171;
  box-shadow: 0 0 16px rgba(248, 113, 113, 0.2);
}

.particle {
  position: absolute;
  border-radius: 50%;
  animation: particle-drift linear infinite;
}

.hero-grid-line {
  stroke: rgba(99, 102, 241, 0.06);
  stroke-width: 1;
}

.glow-orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  animation: pulse-glow 4s ease-in-out infinite;
}

.sticky-mobile-btn {
  display: none;
}
@media (max-width: 768px) {
  .sticky-mobile-btn {
    display: flex;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 50;
    padding: 12px 16px;
    background: rgba(5, 5, 15, 0.95);
    backdrop-filter: blur(12px);
    border-top: 1px solid rgba(99, 102, 241, 0.15);
  }
}
</style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full" style="background: #05050f; font-family: 'Outfit', sans-serif;">
  <div id="app-root" class="h-full w-full overflow-auto" style="background: linear-gradient(180deg, #05050f 0%, #0a0a1a 50%, #050510 100%);"><!-- NAVBAR -->
   <header id="navbar" style="position: sticky; top: 0; z-index: 40; background: rgba(5, 5, 15, 0.85); backdrop-filter: blur(16px); border-bottom: 1px solid rgba(99, 102, 241, 0.08);">
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
     <div class="flex items-center justify-between h-16"><!-- Logo -->
      <div class="flex items-center gap-2 cursor-pointer" onclick="navigateTo('hero')">
       <div style="width: 32px; height: 32px; background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
        <svg width="18" height="18" viewbox="0 0 24 24" fill="none">
         <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
       </div><span id="nav-logo-text" class="text-lg font-bold tracking-wider" style="background: linear-gradient(135deg, #e2e8f0, #c4b5fd); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">NEXORA</span>
      </div><!-- Desktop Nav -->
      <div class="hidden md:flex items-center gap-8"><button class="nav-link active text-sm font-medium tracking-wide" data-nav="hero" onclick="navigateTo('hero')">Home</button> <button class="nav-link text-sm font-medium tracking-wide" data-nav="markets" onclick="navigateTo('markets')">Markets</button> <button class="nav-link text-sm font-medium tracking-wide" data-nav="dashboard" onclick="navigateTo('dashboard')">Dashboard</button> <button class="nav-link text-sm font-medium tracking-wide" data-nav="create" onclick="navigateTo('create')">Create</button>
      </div><!-- Connect Wallet + Mobile Menu -->
      <div class="flex items-center gap-3"><button id="connect-wallet-btn" class="btn-primary px-4 py-2 rounded-xl text-sm hidden sm:block" onclick="toggleWallet()">Connect Wallet</button> <button class="md:hidden p-2 rounded-lg" style="color: #94a3b8;" onclick="toggleMobileMenu()" aria-label="Toggle menu">
        <svg id="menu-icon" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
         <line x1="3" y1="6" x2="21" y2="6" /><line x1="3" y1="12" x2="21" y2="12" /><line x1="3" y1="18" x2="21" y2="18" />
        </svg>
        <svg id="close-icon" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" style="display:none;">
         <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
        </svg></button>
      </div>
     </div><!-- Mobile Menu -->
     <div id="mobile-menu" style="display: none; border-top: 1px solid rgba(99, 102, 241, 0.1);" class="md:hidden pb-4">
      <div class="flex flex-col gap-1 pt-2"><button class="nav-link active text-left px-3 py-2 rounded-lg text-sm font-medium" data-nav="hero" onclick="navigateTo('hero'); toggleMobileMenu();">Home</button> <button class="nav-link text-left px-3 py-2 rounded-lg text-sm font-medium" data-nav="markets" onclick="navigateTo('markets'); toggleMobileMenu();">Markets</button> <button class="nav-link text-left px-3 py-2 rounded-lg text-sm font-medium" data-nav="dashboard" onclick="navigateTo('dashboard'); toggleMobileMenu();">Dashboard</button> <button class="nav-link text-left px-3 py-2 rounded-lg text-sm font-medium" data-nav="create" onclick="navigateTo('create'); toggleMobileMenu();">Create</button> <button id="connect-wallet-btn-mobile" class="btn-primary px-4 py-2 rounded-xl text-sm mt-2 sm:hidden" onclick="toggleWallet()">Connect Wallet</button>
      </div>
     </div>
    </nav>
   </header><!-- ===================== HERO SECTION ===================== -->
   <main>
    <section id="page-hero" class="relative" style="min-height: calc(100% - 64px); overflow: hidden;"><!-- Animated Background -->
     <div id="hero-bg" class="absolute inset-0" style="pointer-events: none;">
      <svg class="absolute inset-0 w-full h-full" xmlns="http://www.w3.org/2000/svg"><!-- Grid lines --> <line x1="0" y1="25%" x2="100%" y2="25%" class="hero-grid-line" /> <line x1="0" y1="50%" x2="100%" y2="50%" class="hero-grid-line" /> <line x1="0" y1="75%" x2="100%" y2="75%" class="hero-grid-line" /> <line x1="25%" y1="0" x2="25%" y2="100%" class="hero-grid-line" /> <line x1="50%" y1="0" x2="50%" y2="100%" class="hero-grid-line" /> <line x1="75%" y1="0" x2="75%" y2="100%" class="hero-grid-line" />
      </svg>
      <div class="glow-orb" style="width: 400px; height: 400px; background: rgba(99, 102, 241, 0.08); top: 10%; left: 20%;"></div>
      <div class="glow-orb" style="width: 300px; height: 300px; background: rgba(139, 92, 246, 0.06); top: 40%; right: 15%; animation-delay: 2s;"></div>
      <div class="glow-orb" style="width: 200px; height: 200px; background: rgba(99, 102, 241, 0.05); bottom: 15%; left: 40%; animation-delay: 1s;"></div>
      <div id="particles-container"></div>
     </div>
     <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center text-center" style="min-height: calc(100% - 64px); padding-top: 80px; padding-bottom: 80px;"><!-- Privacy Badge -->
      <div class="animate-fade-in-up delay-1 encrypted-badge px-4 py-2 rounded-full flex items-center gap-2 mb-8">
       <svg width="14" height="14" viewbox="0 0 24 24" fill="none" stroke="#818cf8" stroke-width="2" stroke-linecap="round">
        <rect x="3" y="11" width="18" height="11" rx="2" /><path d="M7 11V7a5 5 0 0 1 10 0v4" />
       </svg><span class="text-xs font-medium tracking-wider" style="color: #a5b4fc;">CONFIDENTIAL COMPUTING · POWERED BY ARCIUM</span>
      </div><!-- Title -->
      <h1 id="hero-title" class="animate-fade-in-up delay-2 text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-black tracking-tight leading-none mb-6" style="background: linear-gradient(135deg, #f1f5f9 0%, #c4b5fd 40%, #818cf8 70%, #6366f1 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">NEXORA</h1><!-- Subtitle -->
      <p id="hero-subtitle" class="animate-fade-in-up delay-3 text-lg sm:text-xl md:text-2xl font-medium mb-4" style="color: #c4b5fd; max-width: 600px;">Private Onchain Prediction Market Powered by Arcium</p><!-- Description -->
      <p id="hero-description" class="animate-fade-in-up delay-4 text-sm sm:text-base mb-10 leading-relaxed" style="color: rgba(148, 163, 184, 0.8); max-width: 520px;">Place encrypted YES/NO predictions into a shared liquidity pool. Your position stays private. Only results are revealed.</p><!-- Buttons -->
      <div class="animate-fade-in-up delay-5 flex flex-col sm:flex-row gap-4"><button id="hero-primary-btn" class="btn-primary px-8 py-3.5 rounded-xl text-base" onclick="navigateTo('markets')">Explore Markets</button> <button id="hero-secondary-btn" class="btn-secondary px-8 py-3.5 rounded-xl text-base" onclick="navigateTo('create')">Create Market</button>
      </div><!-- Stats -->
      <div class="animate-fade-in-up delay-6 mt-16 grid grid-cols-3 gap-8 sm:gap-16">
       <div class="text-center">
        <div class="text-2xl sm:text-3xl font-bold" style="color: #e2e8f0;">
         $4.2M
        </div>
        <div class="text-xs mt-1 tracking-wider" style="color: rgba(148,163,184,0.5);">
         TOTAL VOLUME
        </div>
       </div>
       <div class="text-center">
        <div class="text-2xl sm:text-3xl font-bold" style="color: #e2e8f0;">
         847
        </div>
        <div class="text-xs mt-1 tracking-wider" style="color: rgba(148,163,184,0.5);">
         MARKETS
        </div>
       </div>
       <div class="text-center">
        <div class="text-2xl sm:text-3xl font-bold" style="color: #e2e8f0;">
         100%
        </div>
        <div class="text-xs mt-1 tracking-wider" style="color: rgba(148,163,184,0.5);">
         PRIVATE
        </div>
       </div>
      </div>
     </div>
    </section><!-- ===================== MARKETS PAGE ===================== -->
    <section id="page-markets" style="display: none;" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
     <div class="mb-8">
      <h2 class="text-3xl font-bold mb-2" style="color: #f1f5f9;">Prediction Markets</h2>
      <p class="text-sm" style="color: rgba(148,163,184,0.6);">Browse open markets and place encrypted predictions</p>
     </div><!-- Filters -->
     <div class="flex flex-wrap gap-2 mb-8"><button class="filter-btn px-4 py-2 rounded-xl text-sm font-medium" style="background: rgba(99,102,241,0.15); color: #818cf8; border: 1px solid rgba(99,102,241,0.3);" data-filter="all" onclick="filterMarkets('all')">All</button> <button class="filter-btn px-4 py-2 rounded-xl text-sm font-medium" style="background: transparent; color: rgba(148,163,184,0.6); border: 1px solid rgba(148,163,184,0.15);" data-filter="open" onclick="filterMarkets('open')">Open</button> <button class="filter-btn px-4 py-2 rounded-xl text-sm font-medium" style="background: transparent; color: rgba(148,163,184,0.6); border: 1px solid rgba(148,163,184,0.15);" data-filter="closed" onclick="filterMarkets('closed')">Closed</button> <button class="filter-btn px-4 py-2 rounded-xl text-sm font-medium" style="background: transparent; color: rgba(148,163,184,0.6); border: 1px solid rgba(148,163,184,0.15);" data-filter="resolved" onclick="filterMarkets('resolved')">Resolved</button>
     </div><!-- Market Grid -->
     <div id="market-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
     </div>
    </section><!-- ===================== MARKET DETAIL PAGE ===================== -->
    <section id="page-detail" style="display: none;" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><button class="flex items-center gap-2 mb-8 text-sm font-medium" style="color: rgba(148,163,184,0.6);" onclick="navigateTo('markets')">
      <svg width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
       <path d="M19 12H5" /><path d="M12 19l-7-7 7-7" />
      </svg> Back to Markets </button>
     <div class="grid grid-cols-1 lg:grid-cols-5 gap-8"><!-- Left -->
      <div class="lg:col-span-3">
       <div class="glass-card rounded-2xl p-6 sm:p-8 mb-6">
        <div class="flex items-start justify-between gap-4 mb-6">
         <h2 id="detail-question" class="text-xl sm:text-2xl font-bold" style="color: #f1f5f9;"></h2><span id="detail-status-badge" class="badge-open px-3 py-1 rounded-full text-xs font-semibold flex-shrink-0"></span>
        </div>
        <p id="detail-description" class="text-sm mb-6 leading-relaxed" style="color: rgba(148,163,184,0.7);"></p>
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-8">
         <div class="p-4 rounded-xl" style="background: rgba(10,10,30,0.5); border: 1px solid rgba(99,102,241,0.08);">
          <div class="text-xs mb-1 tracking-wider" style="color: rgba(148,163,184,0.4);">
           TOTAL POOL
          </div>
          <div id="detail-pool" class="text-lg font-bold" style="color: #e2e8f0;"></div>
         </div>
         <div class="p-4 rounded-xl" style="background: rgba(10,10,30,0.5); border: 1px solid rgba(99,102,241,0.08);">
          <div class="text-xs mb-1 tracking-wider" style="color: rgba(148,163,184,0.4);">
           TIME LEFT
          </div>
          <div id="detail-countdown" class="text-lg font-bold font-mono" style="color: #e2e8f0;"></div>
         </div>
         <div class="p-4 rounded-xl col-span-2 sm:col-span-1" style="background: rgba(10,10,30,0.5); border: 1px solid rgba(99,102,241,0.08);">
          <div class="text-xs mb-1 tracking-wider" style="color: rgba(148,163,184,0.4);">
           PARTICIPANTS
          </div>
          <div id="detail-participants" class="text-lg font-bold" style="color: #e2e8f0;"></div>
         </div>
        </div><!-- Pool Bar -->
        <div class="mb-2">
         <div class="flex justify-between text-xs font-medium mb-2"><span style="color: #34d399;">YES <span id="detail-yes-pct"></span></span> <span style="color: #f87171;">NO <span id="detail-no-pct"></span></span>
         </div>
         <div class="w-full h-3 rounded-full overflow-hidden" style="background: rgba(20,20,40,0.8);">
          <div id="detail-pool-bar" class="h-full rounded-full pool-bar-yes transition-all duration-700" style="width: 60%;"></div>
         </div>
         <div class="flex justify-between text-xs mt-2" style="color: rgba(148,163,184,0.4);"><span id="detail-yes-amount"></span> <span id="detail-no-amount"></span>
         </div>
        </div>
       </div><!-- Activity Feed -->
       <div class="glass-card rounded-2xl p-6">
        <h3 class="text-base font-semibold mb-4" style="color: #e2e8f0;">Pool Activity</h3>
        <div id="activity-feed" class="space-y-3"></div>
       </div>
      </div><!-- Right - Bet Panel -->
      <div class="lg:col-span-2">
       <div class="glass-card rounded-2xl p-6 sm:p-8" style="position: sticky; top: 80px;">
        <h3 class="text-lg font-semibold mb-6" style="color: #f1f5f9;">Place Private Bet</h3><!-- Toggle -->
        <div class="grid grid-cols-2 gap-3 mb-6"><button id="bet-yes-btn" class="toggle-btn active-yes py-3 rounded-xl text-sm font-semibold" style="border: 1px solid rgba(52,211,153,0.3);" onclick="selectBetSide('yes')"> <span class="flex items-center justify-center gap-2">
           <svg width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <path d="M20 6L9 17l-5-5" />
           </svg> YES </span> </button> <button id="bet-no-btn" class="toggle-btn py-3 rounded-xl text-sm font-semibold" style="border: 1px solid rgba(148,163,184,0.15); color: rgba(148,163,184,0.5);" onclick="selectBetSide('no')"> <span class="flex items-center justify-center gap-2">
           <svg width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
            <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
           </svg> NO </span> </button>
        </div><!-- Amount Input -->
        <div class="mb-4"><label for="bet-amount" class="block text-xs font-medium mb-2 tracking-wider" style="color: rgba(148,163,184,0.5);">BET AMOUNT (USDC)</label>
         <div class="relative"><input id="bet-amount" type="number" placeholder="0.00" class="input-field w-full px-4 py-3 rounded-xl text-base font-mono" min="0" step="0.01">
          <div class="absolute right-3 top-1/2 -translate-y-1/2 flex gap-1"><button class="px-2 py-1 rounded-lg text-xs font-medium" style="background: rgba(99,102,241,0.1); color: #818cf8;" onclick="document.getElementById('bet-amount').value='100'">100</button> <button class="px-2 py-1 rounded-lg text-xs font-medium" style="background: rgba(99,102,241,0.1); color: #818cf8;" onclick="document.getElementById('bet-amount').value='500'">500</button> <button class="px-2 py-1 rounded-lg text-xs font-medium" style="background: rgba(99,102,241,0.1); color: #818cf8;" onclick="document.getElementById('bet-amount').value='1000'">1K</button>
          </div>
         </div>
        </div><!-- Encryption Notice -->
        <div class="encrypted-badge rounded-xl p-3 mb-6 flex items-start gap-3">
         <svg width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="#818cf8" stroke-width="2" stroke-linecap="round" class="flex-shrink-0 mt-0.5">
          <rect x="3" y="11" width="18" height="11" rx="2" /><path d="M7 11V7a5 5 0 0 1 10 0v4" />
         </svg>
         <div>
          <div class="text-xs font-semibold" style="color: #a5b4fc;">
           Your position will be encrypted via Arcium
          </div>
          <div class="text-xs mt-1" style="color: rgba(148,163,184,0.5);">
           Bet amount and side are confidential until resolution.
          </div>
         </div>
        </div><!-- Submit --> <button id="place-bet-btn" class="btn-primary w-full py-3.5 rounded-xl text-base font-semibold" onclick="placeBet()">Place Private Bet</button>
        <p class="text-center text-xs mt-4" style="color: rgba(148,163,184,0.35);">Gas fees apply · Non-reversible</p>
       </div>
      </div>
     </div>
    </section><!-- ===================== DASHBOARD PAGE ===================== -->
    <section id="page-dashboard" style="display: none;" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
     <div class="mb-8">
      <h2 class="text-3xl font-bold mb-2" style="color: #f1f5f9;">Dashboard</h2>
      <p class="text-sm" style="color: rgba(148,163,184,0.6);">Your private positions and portfolio overview</p>
     </div><!-- Wallet Card -->
     <div class="glass-card rounded-2xl p-6 mb-8">
      <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
       <div class="flex items-center gap-4">
        <div class="w-12 h-12 rounded-xl flex items-center justify-center" style="background: linear-gradient(135deg, #6366f1, #8b5cf6);">
         <svg width="22" height="22" viewbox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round">
          <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4" /><path d="M3 5v14a2 2 0 0 0 2 2h16v-5" /><path d="M18 12a2 2 0 0 0 0 4h4v-4h-4z" />
         </svg>
        </div>
        <div>
         <div class="text-xs tracking-wider mb-1" style="color: rgba(148,163,184,0.4);">
          CONNECTED WALLET
         </div>
         <div id="wallet-address" class="font-mono text-sm font-semibold" style="color: #e2e8f0;">
          0x7a3F...9b2E
         </div>
        </div>
       </div>
       <div class="encrypted-badge px-3 py-1.5 rounded-full flex items-center gap-2">
        <svg width="12" height="12" viewbox="0 0 24 24" fill="none" stroke="#818cf8" stroke-width="2.5" stroke-linecap="round">
         <rect x="3" y="11" width="18" height="11" rx="2" /><path d="M7 11V7a5 5 0 0 1 10 0v4" />
        </svg><span class="text-xs font-medium" style="color: #a5b4fc;">Positions Encrypted</span>
       </div>
      </div>
     </div><!-- Stats Grid -->
     <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <div class="glass-card rounded-2xl p-5">
       <div class="text-xs tracking-wider mb-2" style="color: rgba(148,163,184,0.4);">
        ACTIVE BETS
       </div>
       <div class="text-2xl font-bold" style="color: #e2e8f0;">
        5
       </div>
      </div>
      <div class="glass-card rounded-2xl p-5">
       <div class="text-xs tracking-wider mb-2" style="color: rgba(148,163,184,0.4);">
        PENDING CLAIMS
       </div>
       <div class="text-2xl font-bold" style="color: #fbbf24;">
        2
       </div>
      </div>
      <div class="glass-card rounded-2xl p-5">
       <div class="text-xs tracking-wider mb-2" style="color: rgba(148,163,184,0.4);">
        TOTAL P&amp;L
       </div>
       <div class="text-2xl font-bold" style="color: #34d399;">
        +$1,240
       </div>
      </div>
      <div class="glass-card rounded-2xl p-5">
       <div class="text-xs tracking-wider mb-2" style="color: rgba(148,163,184,0.4);">
        WIN RATE
       </div>
       <div class="text-2xl font-bold" style="color: #818cf8;">
        68%
       </div>
      </div>
     </div><!-- Positions Table -->
     <div class="glass-card rounded-2xl overflow-hidden">
      <div class="p-6 pb-4">
       <h3 class="text-base font-semibold" style="color: #e2e8f0;">Your Positions</h3>
      </div>
      <div class="overflow-x-auto">
       <table class="w-full">
        <thead>
         <tr style="border-bottom: 1px solid rgba(99,102,241,0.1);">
          <th class="text-left text-xs font-medium tracking-wider px-6 py-3" style="color: rgba(148,163,184,0.4);">MARKET</th>
          <th class="text-left text-xs font-medium tracking-wider px-6 py-3" style="color: rgba(148,163,184,0.4);">SIDE</th>
          <th class="text-left text-xs font-medium tracking-wider px-6 py-3" style="color: rgba(148,163,184,0.4);">STATUS</th>
          <th class="text-right text-xs font-medium tracking-wider px-6 py-3" style="color: rgba(148,163,184,0.4);">ACTION</th>
         </tr>
        </thead>
        <tbody id="positions-table">
        </tbody>
       </table>
      </div>
     </div>
    </section><!-- ===================== CREATE MARKET PAGE ===================== -->
    <section id="page-create" style="display: none;" class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
     <div class="mb-8">
      <h2 class="text-3xl font-bold mb-2" style="color: #f1f5f9;">Create Market</h2>
      <p class="text-sm" style="color: rgba(148,163,184,0.6);">Launch a new encrypted prediction market</p>
     </div>
     <form id="create-market-form" class="glass-card rounded-2xl p-6 sm:p-8" onsubmit="handleCreateMarket(event)">
      <div class="space-y-6"><!-- Question -->
       <div><label for="market-question" class="block text-xs font-medium tracking-wider mb-2" style="color: rgba(148,163,184,0.5);">MARKET QUESTION</label> <input id="market-question" type="text" placeholder="Will BTC exceed $100,000 before June 2025?" class="input-field w-full px-4 py-3 rounded-xl text-sm" required>
       </div><!-- Description -->
       <div><label for="market-description" class="block text-xs font-medium tracking-wider mb-2" style="color: rgba(148,163,184,0.5);">DESCRIPTION</label> <textarea id="market-description" rows="4" placeholder="Provide context and resolution criteria for this market..." class="input-field w-full px-4 py-3 rounded-xl text-sm resize-none"></textarea>
       </div><!-- Expiry + Oracle -->
       <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <div><label for="market-expiry" class="block text-xs font-medium tracking-wider mb-2" style="color: rgba(148,163,184,0.5);">EXPIRY DATE</label> <input id="market-expiry" type="date" class="input-field w-full px-4 py-3 rounded-xl text-sm" required>
        </div>
        <div><label for="market-oracle" class="block text-xs font-medium tracking-wider mb-2" style="color: rgba(148,163,184,0.5);">ORACLE SOURCE</label> <select id="market-oracle" class="input-field w-full px-4 py-3 rounded-xl text-sm" required> <option value="" disabled selected>Select oracle</option> <option value="pyth">Pyth Network</option> <option value="chainlink">Chainlink</option> <option value="switchboard">Switchboard</option> <option value="custom">Custom Oracle</option> </select>
        </div>
       </div><!-- Initial Liquidity -->
       <div><label for="market-liquidity" class="block text-xs font-medium tracking-wider mb-2" style="color: rgba(148,163,184,0.5);">INITIAL LIQUIDITY (USDC)</label> <input id="market-liquidity" type="number" placeholder="1000" class="input-field w-full px-4 py-3 rounded-xl text-sm" min="100" step="100">
       </div><!-- Privacy Note -->
       <div class="encrypted-badge rounded-xl p-4 flex items-start gap-3">
        <svg width="18" height="18" viewbox="0 0 24 24" fill="none" stroke="#818cf8" stroke-width="2" stroke-linecap="round" class="flex-shrink-0 mt-0.5">
         <rect x="3" y="11" width="18" height="11" rx="2" /><path d="M7 11V7a5 5 0 0 1 10 0v4" /><circle cx="12" cy="16" r="1" />
        </svg>
        <div>
         <div class="text-xs font-semibold mb-1" style="color: #a5b4fc;">
          Privacy-First Market
         </div>
         <div class="text-xs leading-relaxed" style="color: rgba(148,163,184,0.5);">
          All bets placed in this market will be encrypted using Arcium's confidential computing. Individual positions remain private until the market resolves.
         </div>
        </div>
       </div><button type="submit" class="btn-primary w-full py-3.5 rounded-xl text-base font-semibold">Create Encrypted Market</button>
      </div>
     </form><!-- Success Toast -->
     <div id="create-success" style="display: none;" class="mt-6 p-4 rounded-xl flex items-center gap-3">
      <svg width="20" height="20" viewbox="0 0 24 24" fill="none" stroke="#34d399" stroke-width="2.5" stroke-linecap="round">
       <path d="M20 6L9 17l-5-5" />
      </svg><span class="text-sm font-medium" style="color: #34d399;">Market created successfully! Redirecting...</span>
     </div>
    </section><!-- ===================== FOOTER ===================== -->
    <footer id="main-footer" style="border-top: 1px solid rgba(99,102,241,0.08); margin-top: 60px;">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8">
       <div>
        <div class="flex items-center gap-2 mb-4">
         <div style="width: 24px; height: 24px; background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
          <svg width="12" height="12" viewbox="0 0 24 24" fill="none">
           <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="white" stroke-width="2.5" />
          </svg>
         </div><span class="text-sm font-bold tracking-wider" style="color: #e2e8f0;">NEXORA</span>
        </div>
        <p class="text-xs leading-relaxed" style="color: rgba(148,163,184,0.4);">Private onchain prediction markets powered by confidential computing.</p>
       </div>
       <div>
        <h4 class="text-xs font-semibold tracking-wider mb-3" style="color: rgba(148,163,184,0.5);">PROTOCOL</h4>
        <div class="flex flex-col gap-2"><a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">About</a> <a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">Documentation</a> <a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">Governance</a>
        </div>
       </div>
       <div>
        <h4 class="text-xs font-semibold tracking-wider mb-3" style="color: rgba(148,163,184,0.5);">RESOURCES</h4>
        <div class="flex flex-col gap-2"><a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">Privacy Policy</a> <a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">Terms of Use</a> <a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">Bug Bounty</a>
        </div>
       </div>
       <div>
        <h4 class="text-xs font-semibold tracking-wider mb-3" style="color: rgba(148,163,184,0.5);">COMMUNITY</h4>
        <div class="flex flex-col gap-2"><a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">Twitter / X</a> <a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">Discord</a> <a href="#" class="text-xs" style="color: rgba(148,163,184,0.4);" onclick="event.preventDefault()">GitHub</a>
        </div>
       </div>
      </div>
      <div class="flex flex-col sm:flex-row items-center justify-between gap-4 pt-8" style="border-top: 1px solid rgba(99,102,241,0.06);">
       <p class="text-xs" style="color: rgba(148,163,184,0.3);">© 2025 Nexora Protocol. All rights reserved.</p>
       <div class="encrypted-badge px-3 py-1.5 rounded-full flex items-center gap-2">
        <svg width="10" height="10" viewbox="0 0 24 24" fill="none" stroke="#818cf8" stroke-width="2.5">
         <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
        </svg><span class="text-xs" style="color: #a5b4fc;">Powered by Arcium</span>
       </div>
      </div>
     </div>
    </footer>
   </main><!-- Sticky Mobile Action Button -->
   <div class="sticky-mobile-btn"><button id="mobile-action-btn" class="btn-primary w-full py-3 rounded-xl text-sm font-semibold" onclick="handleMobileAction()">Explore Markets</button>
   </div><!-- Toast Container -->
   <div id="toast-container" style="position: fixed; top: 80px; right: 16px; z-index: 100; display: flex; flex-direction: column; gap: 8px; pointer-events: none;"></div>
  </div>
  <script>
// ==================== DATA ====================
const markets = [
  { id: 1, question: "Will BTC exceed $100,000 before July 2025?", description: "This market resolves YES if Bitcoin's price crosses $100,000 on any major exchange before July 1, 2025. Price data sourced from Pyth Network aggregated feed.", status: "open", pool: 124500, yesPool: 74700, noPool: 49800, countdown: "14d 6h 32m", participants: 312, expiry: "2025-07-01" },
  { id: 2, question: "Will ETH merge to PoS achieve 99.9% uptime in Q2?", description: "Resolves based on Ethereum mainnet uptime metrics as reported by ethernodes.org for Q2 2025.", status: "open", pool: 89200, yesPool: 53520, noPool: 35680, countdown: "28d 12h 15m", participants: 198, expiry: "2025-06-30" },
  { id: 3, question: "Will SOL flip BNB by market cap before Sept?", description: "Based on CoinGecko market cap rankings. Resolves YES if Solana's fully diluted market cap exceeds BNB's at any point before September 1, 2025.", status: "open", pool: 67800, yesPool: 40680, noPool: 27120, countdown: "52d 3h 44m", participants: 156, expiry: "2025-09-01" },
  { id: 4, question: "Will the Fed cut rates by 50bps in June 2025?", description: "Resolves based on the FOMC meeting decision in June 2025. Must be a minimum 50 basis point cut from the current federal funds rate.", status: "open", pool: 203400, yesPool: 81360, noPool: 122040, countdown: "38d 9h 12m", participants: 524, expiry: "2025-06-18" },
  { id: 5, question: "Did Ethereum spot ETF see $1B inflows in Jan?", description: "Resolved based on aggregate ETF flow data from Bloomberg Terminal for January 2025.", status: "resolved", pool: 156000, yesPool: 109200, noPool: 46800, countdown: "Resolved", participants: 423, expiry: "2025-02-01", result: "yes" },
  { id: 6, question: "Will DOGE reach $0.50 before April 2025?", description: "Based on DOGE/USD price on Binance. Market closed due to expiry.", status: "closed", pool: 45600, yesPool: 18240, noPool: 27360, countdown: "Closed", participants: 89, expiry: "2025-04-01" }
];

const userPositions = [
  { market: "BTC > $100K before July", side: "encrypted", status: "active", claimable: false },
  { market: "Fed 50bps cut June", side: "encrypted", status: "active", claimable: false },
  { market: "ETH ETF $1B Jan inflows", side: "YES", status: "resolved", claimable: true },
  { market: "SOL flips BNB", side: "encrypted", status: "active", claimable: false },
  { market: "DOGE $0.50 April", side: "NO", status: "closed", claimable: true }
];

const activityFeed = [
  { time: "2m ago", event: "Pool increased by $2,400", type: "increase" },
  { time: "8m ago", event: "New encrypted position added", type: "new" },
  { time: "15m ago", event: "Pool increased by $850", type: "increase" },
  { time: "23m ago", event: "New encrypted position added", type: "new" },
  { time: "41m ago", event: "Pool decreased by $1,200 (withdrawal)", type: "decrease" },
  { time: "1h ago", event: "Pool increased by $5,000", type: "increase" },
];

// ==================== STATE ====================
let currentPage = 'hero';
let currentMarket = null;
let currentBetSide = 'yes';
let walletConnected = false;
let currentFilter = 'all';

// ==================== CONFIG ====================
const defaultConfig = {
  hero_title: 'NEXORA',
  hero_subtitle: 'Private Onchain Prediction Market Powered by Arcium',
  hero_description: 'Place encrypted YES/NO predictions into a shared liquidity pool. Your position stays private. Only results are revealed.',
  primary_btn_text: 'Explore Markets',
  secondary_btn_text: 'Create Market',
  background_color: '#05050f',
  surface_color: '#0f0f23',
  text_color: '#f1f5f9',
  primary_action_color: '#6366f1',
  secondary_action_color: '#8b5cf6',
  font_family: 'Outfit',
  font_size: 16
};

// ==================== NAVIGATION ====================
function navigateTo(page) {
  const pages = ['hero', 'markets', 'detail', 'dashboard', 'create'];
  pages.forEach(p => {
    const el = document.getElementById('page-' + p);
    if (el) el.style.display = 'none';
  });

  const target = document.getElementById('page-' + page);
  if (target) target.style.display = '';

  currentPage = page;

  // Update nav links
  document.querySelectorAll('[data-nav]').forEach(link => {
    link.classList.toggle('active', link.getAttribute('data-nav') === page);
  });

  // Update mobile action button
  const mobileBtn = document.getElementById('mobile-action-btn');
  if (page === 'hero') mobileBtn.textContent = 'Explore Markets';
  else if (page === 'markets') mobileBtn.textContent = 'Create Market';
  else if (page === 'detail') mobileBtn.textContent = 'Place Bet';
  else if (page === 'dashboard') mobileBtn.textContent = 'View Markets';
  else if (page === 'create') mobileBtn.textContent = 'Submit Market';

  // Footer visibility
  document.getElementById('main-footer').style.display = '';

  // Render page content
  if (page === 'markets') renderMarkets();
  if (page === 'dashboard') renderDashboard();

  // Scroll to top
  document.getElementById('app-root').scrollTop = 0;
}

function handleMobileAction() {
  if (currentPage === 'hero') navigateTo('markets');
  else if (currentPage === 'markets') navigateTo('create');
  else if (currentPage === 'detail') document.getElementById('bet-amount').focus();
  else if (currentPage === 'dashboard') navigateTo('markets');
  else if (currentPage === 'create') document.getElementById('create-market-form').requestSubmit();
}

// ==================== MOBILE MENU ====================
function toggleMobileMenu() {
  const menu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');
  const isOpen = menu.style.display !== 'none';
  menu.style.display = isOpen ? 'none' : 'block';
  menuIcon.style.display = isOpen ? 'block' : 'none';
  closeIcon.style.display = isOpen ? 'none' : 'block';
}

// ==================== WALLET ====================
function toggleWallet() {
  walletConnected = !walletConnected;
  const btn = document.getElementById('connect-wallet-btn');
  const btnMobile = document.getElementById('connect-wallet-btn-mobile');
  if (walletConnected) {
    btn.textContent = '0x7a3F...9b2E';
    btn.style.background = 'rgba(99,102,241,0.15)';
    btn.style.border = '1px solid rgba(99,102,241,0.3)';
    btnMobile.textContent = '0x7a3F...9b2E';
    showToast('Wallet connected successfully', 'success');
  } else {
    btn.textContent = 'Connect Wallet';
    btn.style.background = '';
    btn.style.border = '';
    btnMobile.textContent = 'Connect Wallet';
    showToast('Wallet disconnected', 'info');
  }
}

// ==================== TOAST ====================
function showToast(message, type = 'info') {
  const container = document.getElementById('toast-container');
  const toast = document.createElement('div');
  toast.style.cssText = `
    padding: 12px 20px; border-radius: 12px; font-size: 13px; font-weight: 500;
    pointer-events: auto; backdrop-filter: blur(12px); 
    animation: fade-in-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    border: 1px solid ${type === 'success' ? 'rgba(52,211,153,0.3)' : type === 'error' ? 'rgba(248,113,113,0.3)' : 'rgba(99,102,241,0.3)'};
    background: ${type === 'success' ? 'rgba(52,211,153,0.1)' : type === 'error' ? 'rgba(248,113,113,0.1)' : 'rgba(99,102,241,0.1)'};
    color: ${type === 'success' ? '#34d399' : type === 'error' ? '#f87171' : '#818cf8'};
  `;
  toast.textContent = message;
  container.appendChild(toast);
  setTimeout(() => {
    toast.style.opacity = '0';
    toast.style.transform = 'translateY(-8px)';
    toast.style.transition = 'all 0.3s';
    setTimeout(() => toast.remove(), 300);
  }, 3000);
}

// ==================== MARKETS ====================
function renderMarkets() {
  const grid = document.getElementById('market-grid');
  grid.innerHTML = '';

  const filtered = currentFilter === 'all' ? markets : markets.filter(m => m.status === currentFilter);

  filtered.forEach((market, i) => {
    const yesPct = Math.round((market.yesPool / market.pool) * 100);
    const noPct = 100 - yesPct;
    const statusClass = market.status === 'open' ? 'badge-open' : market.status === 'closed' ? 'badge-closed' : 'badge-resolved';

    const card = document.createElement('div');
    card.className = 'glass-card rounded-2xl p-6 cursor-pointer animate-fade-in-up';
    card.style.animationDelay = `${i * 0.08}s`;
    card.onclick = () => openMarketDetail(market.id);
    card.innerHTML = `
      <div class="flex items-start justify-between gap-3 mb-4">
        <h3 class="text-sm font-semibold leading-snug" style="color: #e2e8f0;">${market.question}</h3>
        <span class="${statusClass} px-2.5 py-0.5 rounded-full text-xs font-semibold flex-shrink-0 capitalize">${market.status}</span>
      </div>
      <div class="flex items-center gap-2 mb-4 text-xs font-mono" style="color: rgba(148,163,184,0.5);">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
        ${market.countdown}
      </div>
      <div class="mb-4">
        <div class="flex justify-between text-xs font-medium mb-1.5">
          <span style="color: #34d399;">YES ${yesPct}%</span>
          <span style="color: #f87171;">NO ${noPct}%</span>
        </div>
        <div class="w-full h-2 rounded-full overflow-hidden" style="background: rgba(20,20,40,0.8);">
          <div class="h-full rounded-full pool-bar-yes" style="width: ${yesPct}%; transition: width 0.7s;"></div>
        </div>
      </div>
      <div class="flex items-center justify-between">
        <div>
          <div class="text-xs" style="color: rgba(148,163,184,0.4);">Pool Value</div>
          <div class="text-base font-bold" style="color: #e2e8f0;">$${market.pool.toLocaleString()}</div>
        </div>
        <div class="flex items-center gap-1.5">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="rgba(148,163,184,0.4)" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          <span class="text-xs" style="color: rgba(148,163,184,0.4);">${market.participants} bets</span>
        </div>
      </div>
    `;
    grid.appendChild(card);
  });
}

function filterMarkets(filter) {
  currentFilter = filter;
  document.querySelectorAll('.filter-btn').forEach(btn => {
    const isActive = btn.getAttribute('data-filter') === filter;
    btn.style.background = isActive ? 'rgba(99,102,241,0.15)' : 'transparent';
    btn.style.color = isActive ? '#818cf8' : 'rgba(148,163,184,0.6)';
    btn.style.borderColor = isActive ? 'rgba(99,102,241,0.3)' : 'rgba(148,163,184,0.15)';
  });
  renderMarkets();
}

// ==================== MARKET DETAIL ====================
function openMarketDetail(id) {
  const market = markets.find(m => m.id === id);
  if (!market) return;
  currentMarket = market;

  const yesPct = Math.round((market.yesPool / market.pool) * 100);
  const noPct = 100 - yesPct;

  document.getElementById('detail-question').textContent = market.question;
  document.getElementById('detail-description').textContent = market.description;
  document.getElementById('detail-pool').textContent = '$' + market.pool.toLocaleString();
  document.getElementById('detail-countdown').textContent = market.countdown;
  document.getElementById('detail-participants').textContent = market.participants;
  document.getElementById('detail-yes-pct').textContent = yesPct + '%';
  document.getElementById('detail-no-pct').textContent = noPct + '%';
  document.getElementById('detail-pool-bar').style.width = yesPct + '%';
  document.getElementById('detail-yes-amount').textContent = '$' + market.yesPool.toLocaleString();
  document.getElementById('detail-no-amount').textContent = '$' + market.noPool.toLocaleString();

  const badge = document.getElementById('detail-status-badge');
  badge.textContent = market.status;
  badge.className = (market.status === 'open' ? 'badge-open' : market.status === 'closed' ? 'badge-closed' : 'badge-resolved') + ' px-3 py-1 rounded-full text-xs font-semibold flex-shrink-0 capitalize';

  // Render activity
  const feedEl = document.getElementById('activity-feed');
  feedEl.innerHTML = '';
  activityFeed.forEach(item => {
    const iconColor = item.type === 'increase' ? '#34d399' : item.type === 'decrease' ? '#f87171' : '#818cf8';
    const icon = item.type === 'increase' ? '<path d="M12 19V5"/><path d="M5 12l7-7 7 7"/>' :
                 item.type === 'decrease' ? '<path d="M12 5v14"/><path d="M19 12l-7 7-7-7"/>' :
                 '<rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>';
    const row = document.createElement('div');
    row.className = 'flex items-center gap-3 p-3 rounded-xl';
    row.style.cssText = 'background: rgba(10,10,30,0.4); border: 1px solid rgba(99,102,241,0.05);';
    row.innerHTML = `
      <div class="w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0" style="background: ${iconColor}15;">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="${iconColor}" stroke-width="2" stroke-linecap="round">${icon}</svg>
      </div>
      <div class="flex-1">
        <div class="text-xs font-medium" style="color: #cbd5e1;">${item.event}</div>
      </div>
      <div class="text-xs font-mono" style="color: rgba(148,163,184,0.35);">${item.time}</div>
    `;
    feedEl.appendChild(row);
  });

  navigateTo('detail');
}

// ==================== BET PANEL ====================
function selectBetSide(side) {
  currentBetSide = side;
  const yesBtn = document.getElementById('bet-yes-btn');
  const noBtn = document.getElementById('bet-no-btn');

  if (side === 'yes') {
    yesBtn.className = 'toggle-btn active-yes py-3 rounded-xl text-sm font-semibold';
    yesBtn.style.borderColor = 'rgba(52,211,153,0.3)';
    noBtn.className = 'toggle-btn py-3 rounded-xl text-sm font-semibold';
    noBtn.style.borderColor = 'rgba(148,163,184,0.15)';
    noBtn.style.color = 'rgba(148,163,184,0.5)';
  } else {
    noBtn.className = 'toggle-btn active-no py-3 rounded-xl text-sm font-semibold';
    noBtn.style.borderColor = 'rgba(248,113,113,0.3)';
    yesBtn.className = 'toggle-btn py-3 rounded-xl text-sm font-semibold';
    yesBtn.style.borderColor = 'rgba(148,163,184,0.15)';
    yesBtn.style.color = 'rgba(148,163,184,0.5)';
  }
}

function placeBet() {
  const amount = document.getElementById('bet-amount').value;
  if (!amount || parseFloat(amount) <= 0) {
    showToast('Please enter a valid bet amount', 'error');
    return;
  }
  if (!walletConnected) {
    showToast('Please connect your wallet first', 'error');
    return;
  }

  const btn = document.getElementById('place-bet-btn');
  btn.textContent = 'Encrypting...';
  btn.style.opacity = '0.6';
  btn.style.pointerEvents = 'none';

  setTimeout(() => {
    btn.textContent = 'Place Private Bet';
    btn.style.opacity = '1';
    btn.style.pointerEvents = 'auto';
    document.getElementById('bet-amount').value = '';
    showToast(`Encrypted ${currentBetSide.toUpperCase()} bet of $${parseFloat(amount).toLocaleString()} placed`, 'success');
  }, 1800);
}

// ==================== DASHBOARD ====================
function renderDashboard() {
  const tbody = document.getElementById('positions-table');
  tbody.innerHTML = '';

  userPositions.forEach(pos => {
    const row = document.createElement('tr');
    row.style.borderBottom = '1px solid rgba(99,102,241,0.06)';

    const sideDisplay = pos.side === 'encrypted'
      ? `<span class="flex items-center gap-1.5"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#818cf8" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg><span style="color: #818cf8;" class="text-xs">Encrypted</span></span>`
      : `<span class="text-xs font-semibold" style="color: ${pos.side === 'YES' ? '#34d399' : '#f87171'};">${pos.side}</span>`;

    const statusBadge = pos.status === 'active' ? 'badge-open' : pos.status === 'resolved' ? 'badge-resolved' : 'badge-closed';

    row.innerHTML = `
      <td class="px-6 py-4 text-sm font-medium" style="color: #e2e8f0;">${pos.market}</td>
      <td class="px-6 py-4">${sideDisplay}</td>
      <td class="px-6 py-4"><span class="${statusBadge} px-2.5 py-0.5 rounded-full text-xs font-semibold capitalize">${pos.status}</span></td>
      <td class="px-6 py-4 text-right">
        ${pos.claimable
          ? '<button class="btn-primary px-4 py-1.5 rounded-lg text-xs font-semibold" onclick="claimReward(this)">Claim</button>'
          : '<span class="text-xs" style="color: rgba(148,163,184,0.3);">—</span>'
        }
      </td>
    `;
    tbody.appendChild(row);
  });
}

function claimReward(btn) {
  btn.textContent = 'Claiming...';
  btn.style.opacity = '0.6';
  btn.style.pointerEvents = 'none';
  setTimeout(() => {
    btn.textContent = 'Claimed ✓';
    btn.style.background = 'rgba(52,211,153,0.15)';
    btn.style.border = '1px solid rgba(52,211,153,0.3)';
    btn.style.color = '#34d399';
    showToast('Reward claimed successfully!', 'success');
  }, 1500);
}

// ==================== CREATE MARKET ====================
function handleCreateMarket(e) {
  e.preventDefault();
  if (!walletConnected) {
    showToast('Please connect your wallet first', 'error');
    return;
  }

  const btn = e.target.querySelector('button[type="submit"]');
  btn.textContent = 'Creating...';
  btn.style.opacity = '0.6';
  btn.style.pointerEvents = 'none';

  setTimeout(() => {
    const successEl = document.getElementById('create-success');
    successEl.style.display = 'flex';
    successEl.style.background = 'rgba(52,211,153,0.1)';
    successEl.style.border = '1px solid rgba(52,211,153,0.25)';
    btn.textContent = 'Create Encrypted Market';
    btn.style.opacity = '1';
    btn.style.pointerEvents = 'auto';
    e.target.reset();
    showToast('Market created successfully!', 'success');

    setTimeout(() => {
      successEl.style.display = 'none';
      navigateTo('markets');
    }, 2000);
  }, 2000);
}

// ==================== PARTICLES ====================
function initParticles() {
  const container = document.getElementById('particles-container');
  if (!container) return;
  for (let i = 0; i < 20; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    const size = Math.random() * 3 + 1;
    const duration = Math.random() * 15 + 10;
    const delay = Math.random() * 10;
    const startX = Math.random() * 100;
    const startY = Math.random() * 100;
    const dx = (Math.random() - 0.5) * 200;
    const dy = (Math.random() - 0.5) * 200;

    particle.style.cssText = `
      width: ${size}px; height: ${size}px;
      left: ${startX}%; top: ${startY}%;
      background: ${Math.random() > 0.5 ? 'rgba(99,102,241,0.6)' : 'rgba(139,92,246,0.5)'};
      --dx: ${dx}px; --dy: ${dy}px;
      animation: particle-drift ${duration}s linear ${delay}s infinite;
    `;
    container.appendChild(particle);
  }
}

// ==================== ELEMENT SDK ====================
function applyConfig(config) {
  const c = config || defaultConfig;
  const font = c.font_family || defaultConfig.font_family;
  const baseSize = c.font_size || defaultConfig.font_size;
  const bg = c.background_color || defaultConfig.background_color;
  const surface = c.surface_color || defaultConfig.surface_color;
  const text = c.text_color || defaultConfig.text_color;
  const primary = c.primary_action_color || defaultConfig.primary_action_color;
  const secondary = c.secondary_action_color || defaultConfig.secondary_action_color;

  // Font
  const fontStack = `${font}, Outfit, sans-serif`;
  document.body.style.fontFamily = fontStack;

  // Font size scaling
  const heroTitle = document.getElementById('hero-title');
  const heroSubtitle = document.getElementById('hero-subtitle');
  const heroDesc = document.getElementById('hero-description');
  if (heroTitle) heroTitle.style.fontFamily = fontStack;
  if (heroSubtitle) heroSubtitle.style.fontSize = `${baseSize * 1.4}px`;
  if (heroDesc) heroDesc.style.fontSize = `${baseSize * 0.9}px`;

  // Text content
  if (heroTitle) heroTitle.textContent = c.hero_title || defaultConfig.hero_title;
  if (heroSubtitle) heroSubtitle.textContent = c.hero_subtitle || defaultConfig.hero_subtitle;
  if (heroDesc) heroDesc.textContent = c.hero_description || defaultConfig.hero_description;

  const primaryBtn = document.getElementById('hero-primary-btn');
  const secondaryBtn = document.getElementById('hero-secondary-btn');
  if (primaryBtn) primaryBtn.textContent = c.primary_btn_text || defaultConfig.primary_btn_text;
  if (secondaryBtn) secondaryBtn.textContent = c.secondary_btn_text || defaultConfig.secondary_btn_text;

  // Colors — background
  const appRoot = document.getElementById('app-root');
  if (appRoot) appRoot.style.background = `linear-gradient(180deg, ${bg} 0%, ${adjustColor(bg, 10)} 50%, ${bg} 100%)`;

  // Colors — primary action buttons
  document.querySelectorAll('.btn-primary').forEach(el => {
    el.style.background = `linear-gradient(135deg, ${primary} 0%, ${secondary} 50%, ${primary} 100%)`;
    el.style.backgroundSize = '200% 200%';
  });

  // Colors — secondary action buttons
  document.querySelectorAll('.btn-secondary').forEach(el => {
    el.style.borderColor = `${secondary}59`;
    el.style.color = lightenColor(secondary, 40);
  });

  // Colors — glass cards surface
  document.querySelectorAll('.glass-card').forEach(el => {
    el.style.background = `linear-gradient(135deg, ${surface}cc 0%, ${surface}99 100%)`;
    el.style.borderColor = `${primary}1f`;
  });

  // Colors — text
  document.querySelectorAll('h2, h3').forEach(el => {
    el.style.color = text;
  });

  // Nav logo
  const navLogo = document.getElementById('nav-logo-text');
  if (navLogo) {
    navLogo.style.background = `linear-gradient(135deg, ${text}, ${lightenColor(secondary, 30)})`;
    navLogo.style.webkitBackgroundClip = 'text';
    navLogo.style.webkitTextFillColor = 'transparent';
  }
}

function adjustColor(hex, amount) {
  hex = hex.replace('#', '');
  let r = parseInt(hex.substring(0, 2), 16);
  let g = parseInt(hex.substring(2, 4), 16);
  let b = parseInt(hex.substring(4, 6), 16);
  r = Math.min(255, r + amount);
  g = Math.min(255, g + amount);
  b = Math.min(255, b + amount);
  return `#${r.toString(16).padStart(2,'0')}${g.toString(16).padStart(2,'0')}${b.toString(16).padStart(2,'0')}`;
}

function lightenColor(hex, percent) {
  hex = hex.replace('#', '');
  let r = parseInt(hex.substring(0, 2), 16);
  let g = parseInt(hex.substring(2, 4), 16);
  let b = parseInt(hex.substring(4, 6), 16);
  r = Math.min(255, Math.round(r + (255 - r) * (percent / 100)));
  g = Math.min(255, Math.round(g + (255 - g) * (percent / 100)));
  b = Math.min(255, Math.round(b + (255 - b) * (percent / 100)));
  return `#${r.toString(16).padStart(2,'0')}${g.toString(16).padStart(2,'0')}${b.toString(16).padStart(2,'0')}`;
}

// SDK Init
if (window.elementSdk) {
  window.elementSdk.init({
    defaultConfig: defaultConfig,
    onConfigChange: async (config) => {
      applyConfig(config);
    },
    mapToCapabilities: (config) => ({
      recolorables: [
        { get: () => config.background_color || defaultConfig.background_color, set: (v) => { config.background_color = v; window.elementSdk.setConfig({ background_color: v }); } },
        { get: () => config.surface_color || defaultConfig.surface_color, set: (v) => { config.surface_color = v; window.elementSdk.setConfig({ surface_color: v }); } },
        { get: () => config.text_color || defaultConfig.text_color, set: (v) => { config.text_color = v; window.elementSdk.setConfig({ text_color: v }); } },
        { get: () => config.primary_action_color || defaultConfig.primary_action_color, set: (v) => { config.primary_action_color = v; window.elementSdk.setConfig({ primary_action_color: v }); } },
        { get: () => config.secondary_action_color || defaultConfig.secondary_action_color, set: (v) => { config.secondary_action_color = v; window.elementSdk.setConfig({ secondary_action_color: v }); } }
      ],
      borderables: [],
      fontEditable: {
        get: () => config.font_family || defaultConfig.font_family,
        set: (v) => { config.font_family = v; window.elementSdk.setConfig({ font_family: v }); }
      },
      fontSizeable: {
        get: () => config.font_size || defaultConfig.font_size,
        set: (v) => { config.font_size = v; window.elementSdk.setConfig({ font_size: v }); }
      }
    }),
    mapToEditPanelValues: (config) => new Map([
      ['hero_title', config.hero_title || defaultConfig.hero_title],
      ['hero_subtitle', config.hero_subtitle || defaultConfig.hero_subtitle],
      ['hero_description', config.hero_description || defaultConfig.hero_description],
      ['primary_btn_text', config.primary_btn_text || defaultConfig.primary_btn_text],
      ['secondary_btn_text', config.secondary_btn_text || defaultConfig.secondary_btn_text]
    ])
  });
}

// Initial render
initParticles();
applyConfig(defaultConfig);
</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cd56ae623d1ce6a',t:'MTc3MDk5NzE1Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
